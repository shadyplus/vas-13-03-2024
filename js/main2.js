var orderValidator=new FormValidator;!function(e){function r(r){function o(e,r){return Boolean(e.find("input[name="+r+"], select[name="+r+"]").length)}function t(r,t,a){if(a=a||"",!o(r,t)){var n=e('<input type="hidden" name="'+t+'" value="">');n.val(a),r.prepend(n)}}if((r=e(r)).on("submit",(function(e){app.blockForm()})),o(r,"phone")){o(r,"lead_token")||(r.prop("action",app.formAction),r.attr("action",app.formAction),r.attr("autocomplete","on"),r.find("[name=name]").attr("autocomplete","name"),r.find("[name=phone]").attr("autocomplete","tel"),r.find("[name=name]").attr("autocomplete","name").attr("required","required"),r.find("[name=phone]").attr("autocomplete","tel").attr("required","required"),t(r,"offer",app.currentOffer.id),t(r,"country",""),t(r,"lead_token",app.leadToken),t(r,"local_time"),t(r,"timezone_int"),t(r,"visit_duration1"),t(r,"visit_duration2"),t(r,"code_confirm"),t(r,"stream_hid",app.streamHid)),r.find("select[name=offer]").length?e(r).find("[name=country]").val(app.currentOffer&&app.currentOffer.country.code):e(r).find("[name=country]").remove();var a=new Date,n=a.getTimezoneOffset()/-60,i=parseInt(a.getTime()/1e3-app.timestamp);e(r).find("input[name=timezone_int]").val(n),e(r).find("input[name=visit_duration1]").val(i)}}window.addEventListener("DOMContentLoaded",(function(){var e=null;void 0!==jQuery.fn.mask||app.disablePhoneMask||(e=new InterPhoneCodes,document.querySelectorAll("form").forEach((function(r){try{var o=r.elements.phone,t=r.elements.offer;if(country=window.app.currentOffer.country.code,-1!==e.defaultDirectionCountry.indexOf(country)&&(o.setAttribute("dir","ltr"),o.setAttribute("style","direction:ltr")),!o||!t)throw new Error("form element not found");e.countryCodeHandler(o,t)}catch(e){console.error(e.stack)}})));set_validator_errors(),orderValidator.addRule("name",orderValidator.errorNameField,"length",{minlength:2}),orderValidator.addRule("phone",orderValidator.errorPhoneField,"phone",{interPhoneCodes:e}),orderValidator.addMessages("name",{required:orderValidator.errorNameMess,minlength:orderValidator.errorNameMess}),orderValidator.addMessages("phone",{phone:orderValidator.errorPhoneMess}),orderValidator.addRule("other[email]",orderValidator.errorEmailField,"email"),orderValidator.addMessages("other[email]",{email:orderValidator.errorEmail}),orderValidator.addRule("email",orderValidator.errorEmailField,"email"),orderValidator.addMessages("email",{email:orderValidator.errorEmail}),orderValidator.watch("form:not(.novalidate, .notorder)")})),e(document).on("keyup keydown click input","form:not(.novalidate, .notorder)",(function(r){for(var o=r.currentTarget,t=["name","phone","offer"],a=0;a<t.length;++a){var n=t[a],i=e(this).find("[name="+n+"]"),d=e("form").not(o).find("[name="+n+"]"),l=i.val();if(d.val(l),"phone"===n){var m=i.attr("placeholder");d.attr("placeholder",m)}}})),e(document).on("validate.valid validate.error","form",(function(r){var o=r.validator,t=function(r,o){var t=e(r),a=t.parent(),n=a.find("label");a.find(".error-container").html(o[0]).show(),e.each([t,a,n],(function(){e(this).is("form")||e(this).removeClass("field-valid").addClass("field-error")}))},a=function(r){var o=e(r),t=o.parent(),a=t.find("label");e(r).parent().find(".error-container").empty().hide(),e.each([o,t,a],(function(){e(this).is("form")||e(this).addClass("field-valid").removeClass("field-error")}))};for(var n in o.rules)if("other[email]"!==n){var i=e(this).find("[name="+n+"]").get(0);o.errors[n].length?t(i,o.errors[n]):a(i)}})),setInterval((function(){e("form").each((function(e,o){r(o)}))}),1e3),e(document).on("focus","form",(function(e){r(this)})),e(document).on("change input","select[name=offer]",(function(e){app.setOffer(this.value),app.unblockForm()})),e(document).on("keyup click change input","form",(function(){app.incompleteOrder.processForm(this)})),e(document).on("validate.success","form",(function(e){e.submitEvent&&(app.incompleteOrder.lock=!0,clearTimeout(app.incompleteOrder.timer))})),app.showcaseUrl&&document.addEventListener("DOMContentLoaded",(function(){window.vitBack(app.showcaseUrl,!0)}))}(app.jq);